webpackJsonp([8],{11:function(e,t,n){"use strict";function i(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function o(e){return e.split(" ").map(function(e){return e.includes("+")||e.includes("click")?e:"<span class='o-keyboardkey'>"+e+"</span>"}).join(" ")}function r(e){if(!Array.isArray(e)||!e.length)return"";var t="";return e.forEach(function(e){t=t+","+e}),t.substring(1)}function a(e,t){return(" "+e.className+" ").includes(" "+t+" ")}function d(e,t){return(" "+e.className+" ").includes(" "+t+" ")||(e.className+=" "+t),e}function s(e,t){return e.className=" "+e.className+" ",e.className.includes(" "+t+" ")&&(e.className=e.className.replace(" "+t+" "," ")),e}function l(e){var t=[];return e=e.map(function(e){return e.trim()}),e.forEach(function(e){e.replace(/\s/g,"").length&&t.push(e)}.bind(t)),t}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return e.sort(function(e,i){var o=e[t]?e[t].toUpperCase():" ",r=i[t]?i[t].toUpperCase():" ";return"asc"==n?o<r?-1:o>r?1:0:"desc"==n?o>r?-1:o<r?1:0:void 0}.bind(t))}function u(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"asc",r={prop1:t,prop2:n};return e.sort(function(e,a){t=r.prop1,n=r.prop2;var d=void 0,s=void 0;if(d=e[t]?t.includes("date_forgetabboutit")?new Date(k()(new Date(e[t]),"YYYY/MM/DD")):e[t].toUpperCase():" ",s=a[t]?t.includes("date_forgetabboutit")?new Date(k()(new Date(a[t]),"YYYY/MM/DD")):a[t].toUpperCase():" ","asc"==i){if(d<s)return-1;if(d>s)return 1;if(!e[n]||!a[n])return 0;var l=e[n]?e[n].toUpperCase():" ",c=a[n]?a[n].toUpperCase():" ";if("asc"==o)return l>c?-1:l<c?1:0;if("desc"==o)return l<c?-1:l>c?1:0}else if("desc"==i){if(d>s)return-1;if(d<s)return 1;if(!e[n]||!a[n])return 0;var u=e[n]?e[n].toUpperCase():" ",f=a[n]?a[n].toUpperCase():" ";if("asc"==o)return u>f?-1:u<f?1:0;if("desc"==o)return u<f?-1:u>f?1:0}}.bind(r))}function f(e,t){t=t||b.a;var n={};return e.filter(function(e){var i=t(e);return!(!i||"null"==i)&&(!n.hasOwnProperty(i)&&(n[i]=!0))})}function g(e){return I()(new _.a(e))}function m(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}n.d(t,"f",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"m",function(){return f}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return r}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"k",function(){return m}),n.d(t,"g",function(){return c}),n.d(t,"l",function(){return u}),n.d(t,"j",function(){return l}),n.d(t,"e",function(){return S});var p=n(182),h=n.n(p),v=n(80),_=n.n(v),w=n(46),I=n.n(w),y=n(23),b=n.n(y),T=n(7),D=(n.n(T),n(346)),k=n.n(D),S={tagNameToSlug:function(e){if(e&&"string"==typeof e)return e.split(" ").join("-").toLowerCase()},tagSlugToName:function(e){return e=e.replace(/-/g," "),e=e.split(" ").map(function(e){var t=h()(e),n=t[0],i=t.slice(1);return n.toUpperCase()+i.join("").toLowerCase()}).join(" ")},AplusB:function(e,t){return parseFloat(e)+parseFloat(t)}}},128:function(e,t,n){"use strict";var i=n(11),o=n(366),r=n.n(o),a=n(144),d=n(142),s=n.n(d),l=n(146),c=n.n(l);t.a={install:function(e){window.eventHub=new e,e.prototype.$bus=window.eventHub,e.bus=window.eventHub,e.directive("flatpicky",{inserted:function(e){new r.a(e,a.a)}}),e.directive("focus",{inserted:function(e,t){t.modifiers.noMobile&&n.i(i.d)()||(t.value||void 0===t.value)&&e.focus()}}),e.directive("autoheight",{inserted:function(t,n){e.nextTick(function(){s()(t)})}}),e.directive("autowidth",{inserted:function(t,n){e.nextTick(function(){c()(t)})}}),e.directive("btn-effect",{bind:function(e,t){e.addClass("btn").addClass("btn-dipclick"),e.addEventListener("click",function(t){e.addClass("btn--click"),setTimeout(function(){e.removeClass("btn--click")},400)})}}),e.directive("ios-dblclick",{inserted:function(e,t){}})}}},129:function(e,t,n){"use strict";var i=n(180),o=n.n(i),r=n(181),a=n.n(r),d=function(){function e(){o()(this,e),this.iniKeydownListenerPause(),this.iniKeyBindingListener()}return a()(e,[{key:"keystroke",value:function(e){if("journal"==store.state.selection.view&&("arrowRight"==e||"arrowLeft"==e||"meta_arrowUp"==e||"meta_arrowDown"==e||"meta_arrowRight"==e||"meta_arrowLeft"==e||"spaceBar"==e||"tab"==e||"shift_tab"==e||"t"==e||"-"==e||"s"==e)){console.log("cannot use "+e+" in journal mode");var t=store.getters.text.flashes.cannotDoThisInJournal;return console.log(t),void store.dispatch("sendFlash",{type:"warning",msg:t})}console.log(e),"meta_c"==e?store.dispatch("copyProgrammatic"):"arrowUp"==e?store.dispatch("selectItem",{direction:"prev"}):"arrowDown"==e?store.dispatch("selectItem",{direction:"next"}):"arrowRight"==e?store.dispatch("showChildren",{action:"show"}):"arrowLeft"==e?store.dispatch("showChildren",{action:"hide"}):"meta_arrowUp"==e?store.dispatch("moveItem",{direction:"up"}):"meta_arrowDown"==e?store.dispatch("moveItem",{direction:"down"}):"meta_arrowRight"==e?store.dispatch("indent"):"meta_arrowLeft"==e?store.dispatch("unindent"):"spaceBar"==e?store.dispatch("markDone"):"tab"==e?store.dispatch("indent"):"shift_tab"==e?store.dispatch("unindent"):"enter"==e?store.dispatch("showAddNewItem"):"shift_enter"==e?store.dispatch("showAddNewItem",{addAs:"child"}):"meta_enter"==e?store.dispatch("startEdit"):"ctrl_u"==e?store.dispatch("startEdit"):"t"==e?store.dispatch("setToday"):"-"==e?store.dispatch("setTomorrow"):"shift_t"==e?store.dispatch("startEditTags"):"s"==e?store.dispatch("addTimer"):"meta_shift_d"==e?store.dispatch("duplicate"):"meta_backspace"==e?store.dispatch("deleteItemDialogue"):"backspace"==e?store.dispatch("deleteItemDialogue"):"delete"==e&&store.dispatch("deleteItemDialogue")}},{key:"iniKeydownListenerPause",value:function(){window.keydownListenerPaused=!1,window.preventKeydownListener=function(){console.log("preventing keydown listener"),window.keydownListenerPaused=!0,setTimeout(function(){window.keydownListenerPaused=!1}.bind(this),100)}}},{key:"iniKeyBindingListener",value:function(){var e=this;window.addEventListener("keydown",function(t){if(!keydownListenerPaused){var n=t.keyCode;if("flatpickr-days"==document.activeElement.className&&9==n)return console.log("hiya!"),void t.preventDefault();if(store.state.popouts.delete.length||store.state.popouts.timer.length)27==n&&(t.preventDefault(),eventHub.$emit("clearAll"),console.log("Escape")),9==n&&(t.preventDefault(),t.shiftKey?store.dispatch("focusElement",{el:".btn-cancel"}):store.dispatch("focusElement",{el:".btn-ok"})),37==n&&(t.preventDefault(),store.dispatch("focusElement",{el:".btn-cancel"})),39==n&&(t.preventDefault(),store.dispatch("focusElement",{el:".btn-ok"}));else if(store.state.editingItem||store.state.addingNewUnder||store.state.editingItemTags){if("BUTTON"!=document.activeElement.nodeName)return;27==t.keyCode&&(store.state.editingItem?(store.dispatch("cancelEdit"),console.log("escapeOnEditButtonFocus")):store.state.addingNewUnder&&(store.dispatch("cancelAddNew"),console.log("escapeOnNewButtonFocus")))}else{if("INPUT"==document.activeElement.nodeName||"TEXTAREA"==document.activeElement.nodeName||"A"==document.activeElement.nodeName||"BUTTON"==document.activeElement.nodeName)return void console.log("inputs or buttons are focussed!");switch(t.keyCode){case 37:if(t.preventDefault(),t.ctrlKey||t.metaKey){e.keystroke("meta_arrowLeft");break}e.keystroke("arrowLeft");break;case 39:if(t.preventDefault(),t.ctrlKey||t.metaKey){e.keystroke("meta_arrowRight");break}e.keystroke("arrowRight");break;case 38:if(t.preventDefault(),t.ctrlKey||t.metaKey){e.keystroke("meta_arrowUp");break}e.keystroke("arrowUp");break;case 40:if(t.preventDefault(),t.ctrlKey||t.metaKey){e.keystroke("meta_arrowDown");break}e.keystroke("arrowDown");break;case 32:t.preventDefault(),e.keystroke("spaceBar");break;case 9:if(t.preventDefault(),t.shiftKey){e.keystroke("shift_tab");break}e.keystroke("tab");break;case 13:t.preventDefault(),t.ctrlKey||t.metaKey?e.keystroke("meta_enter"):t.shiftKey?e.keystroke("shift_enter"):e.keystroke("enter");break;case 84:t.preventDefault(),t.ctrlKey||t.metaKey||t.shiftKey?e.keystroke("shift_t"):e.keystroke("t");break;case 83:e.keystroke("s");break;case 85:if(t.ctrlKey){e.keystroke("ctrl_u");break}e.keystroke("u");break;case 68:if(t.preventDefault(),(t.ctrlKey||t.metaKey)&&t.shiftKey){e.keystroke("meta_shift_d");break}break;case 8:if(t.preventDefault(),t.ctrlKey||t.metaKey){e.keystroke("meta_backspace");break}e.keystroke("backspace");break;case 46:t.preventDefault(),e.keystroke("delete");break;case 67:if((t.ctrlKey||t.metaKey)&&0==window.getSelection().toString()){t.preventDefault(),e.keystroke("meta_c");break}break;case 189:t.preventDefault(),e.keystroke("-")}}}})}}]),e}();t.a=d},130:function(e,t,n){"use strict";function i(e){return function(){return n(378)("./"+e+".vue")}}var o=n(72),r=n(374);o.a.use(r.a),t.a=new r.a({routes:[{path:"/",component:i("Index"),children:[{path:"",component:i("Listo")},{path:"login",component:i("Login")},{path:"register",component:i("Register")}]},{path:"*",component:i("Error404")}]})},131:function(e,t,n){"use strict";var i=n(79),o=n(168),r=n(175),a=n(166),d=n(173),s=n(174),l=n(170),c=n(172),u=n(171);t.a=function(){return{state:n.i(i.a)(),getters:o.a,mutations:r.a,actions:a.a,modules:{user:d.a,userSettings:s.a,api:l.a,selection:c.a,newItem:u.a}}}},132:function(e,t){},133:function(e,t){},137:function(e,t,n){function i(e){n(365)}var o=n(140)(n(164),n(373),i,null,null);e.exports=o.exports},141:function(e,t,n){"use strict";function i(e){return o(e)}function o(e){function t(e){return("0"+e).slice(-2)}var n=void 0,i=Math.floor(e/60);n=e%60;var o=Math.floor(i/60);return i%=60,o>0?t(o)+":"+t(i)+":"+t(n):t(i)+":"+t(n)}function r(e){function t(e,t){return e>0?e+" "+t:""}var n=void 0,i=Math.floor(e/60);n=e%60;var o=Math.floor(i/60);return i%=60,o>0?t(o,c.global.hour+" ")+t(i,c.global.min):i>0?t(i,c.global.min+" ")+t(n,c.global.sec):t(n,c.global.sec)}function a(e){function t(e,t){return e>0?e+" "+t:""}var n=Math.floor(e/60);var i=Math.floor(n/60);return n%=60,i>0?t(i,c.global.hour+" ")+t(n,c.global.min):t(n,c.global.min)}function d(e){e=new Date(e.replace(/-/g,"/"));var t=n.i(s.a)(e,new Date,{addSuffix:!0});return t.includes("at")&&(t=t.substring(0,t.indexOf(" at"))),t}n.d(t,"d",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return d});var s=n(34),l=n(78),c=window.store?store.getters.text:l.a.en},144:function(e,t,n){"use strict";t.a={dateFormat:"Y-m-d H:i:S",maxDate:"today",time_24hr:!0,onOpen:function(e,t,n){var i=n.element.name;store.state.beforeEditCache_doneDate||(store.state.beforeEditCache_doneDate={}),console.log("flatPickr[onOpen] id: "+i+".    dateStr: "+t),store.state.beforeEditCache_doneDate[i]=t},onClose:function(e,t,n){var i=n.element.name;console.log("flatPickr[onClose] id: "+i+".    dateStr: "+t),console.log("store.state.beforeEditCache_doneDate[id] = "+store.state.beforeEditCache_doneDate[i]),store.state.beforeEditCache_doneDate[i]!=t&&(store.dispatch("patch",{id:i,field:"done_date",value:t}),delete store.state.beforeEditCache_doneDate[i])}}},164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(71),r=n.n(o),a=n(72),d=n(33),s=n(135),l=(n.n(s),n(134)),c=(n.n(l),n(139)),u=n(131),f=n(138),g=n.n(f),m=n(130),p=n(129),h=n(128),v=n(136),_=n.n(v);n(132),window.Element.prototype.hasClass=function(e){return n.i(i.a)(this,e)},window.Element.prototype.addClass=function(e){return n.i(i.b)(this,e)},window.Element.prototype.removeClass=function(e){return n.i(i.c)(this,e)},window.axios=r.a,window.Vue=a.a,a.a.config.productionTip=!1,a.a.use(d.a,{components:{QBtn:d.b,QIcon:d.c,QPopover:d.d,QModal:d.e,QSpinnerOval:d.f,QLayout:d.g,QFixedPosition:d.h,QProgress:d.i}}),a.a.use(c.a),window.store=new c.a.Store(n.i(u.a)()),a.a.use(g.a),window.router=m.a,new p.a,a.a.use(h.a),a.a.use(_.a),window.vm=new a.a({el:"#q-app",router:m.a,store:store,render:function(e){return e(n(137))}}),n(133)},166:function(e,t,n){"use strict";var i=n(176),o=n.n(i),r=n(7),a=n.n(r),d=n(23),s=n.n(d),l=n(34),c=n(11),u=n(33),f=u.l.addToDate;t.a={resetStore:function(e){var t=e.commit;t("newItem/resetStateData"),t("selection/resetStateData"),t("userSettings/resetStateData"),t("user/resetStateData"),t("resetStateData")},flattenTree:function(e,t){var n=(e.state,e.commit,e.dispatch,e.getters),i=t.array;console.log("flattening tree...");var o=[];return i.forEach(function(e){o.push(e),e.children.length&&Array.prototype.push.apply(o,n.flattenTree(e.children))}),o},giveNewParent:function(e){var t=e.state,n=e.commit,i=e.dispatch,o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.id,d=r.new_parent_id,s=r.specificNewIndex;if(o.isTopLvlItemInFilteredRoot(a)){var l=o.text.flashes.moveTopLvlItem;return console.log(l),void i("sendFlash",{type:"warning",msg:l})}console.log("giving new parent");var c=t.nodes[a].parent_id,u=t.nodes[a],f=t.nodes[d];console.log("newParent ↓ "),console.log(f);var g=t.nodes[c];console.log("prevParent ↓ "),console.log(g);var m=o.siblingIndex(a);if(n("updateState",{id:a,field:"parent_id",value:d}),n("updateState",{id:a,field:"depth",value:f.depth+1}),f.children_order||n("updateState",{id:d,field:"children_order",value:[]}),s||0==s)n("addChild",{index:s,item:u,newParentId:d});else if(g.depth-1==f.depth&&d==g.parent_id){var p=o.siblingIndex(g.id)+1;n("addChild",{index:p,item:u,newParentId:d})}else n("addChild",{item:u,newParentId:d});n("updateState",{field:"show_children",id:d,value:1}),n("deleteChild",{index:m,id:g.id}),0==g.children.length&&n("updateState",{field:"children",id:g.id,value:[]}),i("attachParentBody",{id:a}),i("tagItem",{id:a,tags:o.itemTagArray(d)}),i("patch",{id:a,field:"depth"}),i("patch",{id:a,field:"parent_id"}),i("patch",{id:d,field:"children_order"}),i("patch",{id:d,field:"show_children"}),i("patch",{id:c,field:"children_order"}),i("updateChildrenDepth",{id:u.id}),i("updateChildrenDueDate",{id:d}),i("updateChildrenDueDate",{id:c}),i("autoCalculateDoneState",{id:d}),i("autoCalculateDoneState",{id:c})},duplicate:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.id;r=r||t.selection.selectedId;var a=t.nodes[r],d=i.siblingIndex(r)+1,l=JSON.parse(s()(a));n("postNewItem",{newItem:l,index:d,addNextItemAs:null,addTags:l.tagged.map(function(e){return e.tag_name}),duplication:!0})},addAndCleanNodesRecursively:function(e){var t=(e.state,e.commit),n=e.dispatch,i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.item;r=i.setDefaultItemValues(r),t("addNode",{item:r}),r.children&&r.children.forEach(function(e){return n("addAndCleanNodesRecursively",{item:e})})},addItem:function(e){var t=e.state,n=e.commit,i=e.dispatch,o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.item,d=r.index,s=r.addNextItemAs,l=r.addTags,c=r.duplication;console.log("addItem to DOM"),console.log(a),o["user/loggedIn"]&&!a.id.toString().includes("tempItem")&&(console.log("deleting temp item"),n("deleteTempItem",{item:a})),i("addAndCleanNodesRecursively",{item:a}).then(function(){n("addChild",{newParentId:a.parent_id,index:d,item:a}),l&&i("tagItem",{id:a.id,tags:l}),i("autoCalculateDoneState",{id:a.parent_id}),a.id.toString().includes("tempItem")||(console.log("patching parent order: "+a.parent_id),i("patch",{id:a.parent_id,field:"children_order"})),c||"stop"==s?t.addingNewUnder=null:i("showAddNewItem",{id:a.id,addAs:s}),Vue.nextTick(function(){return i("scrollToItemIfNeeded",{id:a.id})})})},addTempNewItem:function(e){var t=(e.state,e.commit,e.dispatch),n=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=n.item,o=n.index,r=n.addNextItemAs,a=n.addTags;console.info("adding Temp item"),i.id="tempItem_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),i.temp=!0,t("addItem",{item:i,index:o,addNextItemAs:r,addTags:a})},hideTaggedNodes:function(e){var t=e.state,n=(e.commit,e.dispatch,e.getters),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.tag;a()(t.nodes).forEach(function(e){e=parseFloat(e),n.hasTag(e,o)&&(t.selection.hiddenItems.includes(e)||t.selection.hiddenItems.push(e))})},hideDoneNodes:function(e){var t=e.state;e.commit,e.dispatch,e.getters;a()(t.nodes).forEach(function(e){e=parseFloat(e),t.nodes[e].done&&(t.selection.hiddenItems.includes(e)||t.selection.hiddenItems.push(e))})},sortAllChildren:function(e){var t=e.state,n=(e.commit,e.dispatch);e.getters;t.root.children&&t.root.children.length&&(console.log("sorting all items"),a()(t.nodes).forEach(function(e){n("sortChildren",{id:e}),n("updateChildrenDueDate",{id:e})}))},sortChildren:function(e){var t=e.state,n=(e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=n.id,o=t.nodes[i];o.children_order=o.children_order.filter(function(e){return o.children.includes(t.nodes[e])});var r=o.children_order,a=o.children;r instanceof Array&&r.length&&(o.children=r.map(function(e){return a.find(function(t){return t.id===e})}))},updateChildrenDepth:function(e){var t=e.state,n=(e.commit,e.dispatch),i=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o=i.id,r=t.nodes[o].children;if(!r&&!r.length)return!1;r.forEach(function(e){return console.log(e),e.depth=t.nodes[e.parent_id].depth+1,n("patch",{id:e.id,field:"depth"}),n("updateChildrenDepth",{id:e.id}),!0})},copyParentBodyToAllChildren:function(e){var t=e.state,n=(e.commit,e.dispatch),i=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o=i.parent_id;if(o){var r=t.nodes[o];if(r.children_order.length){var a=r.body;r.children_order.forEach(function(e){var i=t.nodes[e];i.parents_bodies=a,vm&&n("patch",{id:i.id,field:"parents_bodies"})})}}},attachParentBody:function(e){var t=e.state,n=e.commit,i=e.dispatch,o=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=o.id;if(r){var a=t.nodes[r];if(a.parent_id){var d=t.nodes[a.parent_id];d&&(n("updateState",{id:r,parents_bodies:d.body}),i("patch",{id:r,field:"parents_bodies"}))}}},deleteItem:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.id;r||console.log("item id not specified at deleteItem");var a=t.nodes[r],d=i.prevItemId(r)?i.prevItemId(r):null;if(Array.isArray(a.children)&&a.children.length){var s=i.allVisibleChildIds(r);n("deleteItemApi",{idOrArray:s}),s.forEach(function(e){vm.$delete(t.nodes,e)})}var l=a.parent_id,c=t.nodes[l];if(c){var u=i.siblingIndex(r);c.children.splice(u,1),c.children_order.splice(u,1),n("patch",{id:l,field:"children_order"})}n("deleteItemApi",{idOrArray:r}),"journal"==t.selection.view&&(t.selection.view=null,t.selection.view="journal"),"tree"==t.selection.view&&(t.selection.view="journal",t.selection.view="tree"),i["selection/dueTodayFiltered"]&&(t.selection.filter.dueDate.to=null,t.selection.filter.dueDate.to=new Date);var f=i.nextItemId(d)?i.nextItemId(d):null;console.log("new selected ID is: "+f),t.selection.selectedId=f,vm.$delete(t.nodes,r)},tagItem:function(e){var t=e.state,i=(e.commit,e.dispatch),o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:t.selection.selectedId,tags:t.newTag,requestType:"tag"},a=r.id,d=void 0===a?t.selection.selectedId:a,l=r.tags,u=void 0===l?t.newTag:l,f=r.requestType,g=void 0===f?"tag":f;if(u&&(u=JSON.parse(s()(u)),t.newTag=null,Array.isArray(u)||(u=[u]),u=n.i(c.j)(u),"tag"==g&&(u=u.filter(function(e){return!o.hasTag(d,e)})),u.length)){i("tagItemTemporarely",{id:d,tags:u,requestType:g}),i("patchTag",{id:d,tags:u});var m=t.nodes[d];m&&m.children.length&&m.children_order.forEach(function(e){i("tagItem",{id:e,tags:u})})}},tagItemTemporarely:function(e){var t=(e.state,e.commit),n=(e.dispatch,e.getters),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:null,tags:null,requestType:"tag"},o=i.id,r=i.tags,a=i.requestType,d=void 0===a?"tag":a;r&&(Array.isArray(r)||(r=[r]),r=r.map(function(e){return n.makeTagObject(e)}),"untag"==d?t("deleteTag",{id:o,tags:r}):t("addTagTemporarely",{id:o,tags:r}))},prepareDonePatch:function(e){var t=e.state,i=e.commit,o=e.dispatch,r=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),a=r.id;console.log("preparingDonePatch for "+a);var d=t.nodes[a];if(d){if(console.log("item.done = "+d.done),d.done){var s=n.i(l.c)(new Date,"YYYY-MM-DD HH:mm:ss");console.log(s),i("updateState",{id:a,done_date:s})}else i("updateState",{id:a,done_date:"0000-00-00 00:00:00"});o("patchDone",{id:a}),d.done&&(o("popup",{id:a,type:"afterDone"}),o("attachParentBody",{id:a}))}},autoCalculateDoneState:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.id;0!=t.nodes[r].depth&&(console.log("auto calculating done state"),(1!=i.allChildrenDone(r)||i.isProject(r))&&n("markDone",{id:r,markAs:"notDone"}))},moveItem:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.id,a=o.direction;if(r=r||t.selection.selectedId,i.isTopLvlItemInFilteredRoot(r)){var d=i.text.flashes.moveTopLvlItem;return console.log(d),void n("sendFlash",{type:"warning",msg:d})}clearTimeout(window.patchDelay);var s=t.nodes[r].parent_id,l=t.nodes[s],c=i.siblingIndex(r);if("up"==a)if(0==c){if(0==l.depth)return void console.log("ceiling!");var u=i.olderSiblingId(s),f=u==l.parent_id?0:null;n("giveNewParent",{id:r,new_parent_id:u,specificNewIndex:f})}else l.children_order.splice(c,1),l.children_order.splice(c-1,0,r),n("sortChildren",{id:s}),window.patchDelay=setTimeout(function(){n("patch",{id:s,field:"children_order"})},1e3);else if("down"==a)if(c+1==l.children_order.length){if(0==l.depth)return void console.log("floor!");var g=i.nextSiblingOrParentsSiblingId(r);console.log("new_parent_id: "+g),n("giveNewParent",{id:r,new_parent_id:g,specificNewIndex:0})}else l.children_order.splice(c,1),l.children_order.splice(c+1,0,r),n("sortChildren",{id:s}),window.patchDelay=setTimeout(function(){n("patch",{id:s,field:"children_order"})},1e3);Vue.nextTick(function(){return n("scrollToItemIfNeeded",{id:r})})},flushDoneItems:function(e){var t=e.state,n=(e.commit,e.dispatch),i=(e.getters,t.nodes),o=a()(i);o.reduce(function(e,t){i[t].done&&n("deleteItem",{id:t})})},updateChildrenDueDate:function(e){var t=e.state,n=(e.commit,e.dispatch),i=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o=i.id,r=t.nodes[o];if(!r.children.length)return!1;r.children.forEach(function(e){r.dueDateParent?(e.dueDateParent=r.dueDateParent,n("updateChildrenDueDate",{id:e.id})):r.due_date&&"0000-00-00 00:00:00"!=r.due_date?(e.dueDateParent=r.due_date,n("updateChildrenDueDate",{id:e.id})):(e.dueDateParent=!1,n("updateChildrenDueDate",{id:e.id}))})},formatDone:function(e){var t=(e.state,e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=t.doneArray,o=i.reduce(function(e,t){if(t.done){var i=n.i(l.c)(t.done_date,"YYYY/MM/DD");e.hasOwnProperty(i)||(e[i]=[]),e[i].push(t)}return e},{});return a()(o).map(function(e){var t={};return t.date=e,t.items=o[e],t})},blockBlur:function(e){var t=e.state;e.commit,e.dispatch,e.getters;t.blockBlur=!0,setTimeout(function(){t.blockBlur=!1},500)},startEdit:function(e){var t=e.state,n=e.commit,i=(e.dispatch,e.getters),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.item,a=o.event;a&&(a.srcElement.hasClass("done")||a.srcElement.hasClass("custom-tag"))||(console.log("startEdit"),r=r||t.nodes[t.selection.selectedId],n("updateState",{beforeEditCache_body:r.body}),n("updateState",{beforeEditCache_planned_time:r.planned_time}),n("updateState",{editingItem:r.id}),i.mobile&&store.$refs["edit-item-modal-"+r.id].open())},scrollToItemIfNeeded:function(e){var t=(e.state,e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=t.id;if(i){var o=document.getElementById("item-body-"+i);n.i(c.k)(o)||o.scrollIntoView()}},doneEdit:function(e){var t=e.state,n=e.commit,i=e.dispatch,r=e.getters,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:t.editingItem},d=a.id,s=void 0===d?t.editingItem:d;console.log("Done edit!"),i("blockBlur"),preventKeydownListener(),r.mobile&&store.$refs["edit-item-modal-"+s].close();var l=t.nodes[s];if(n("updateState",{editingItem:null}),n("updatePopouts",{edit:[]}),t.editingItemTags)return void n("updateState",{editingItemTags:null});l.body||n("updateState",{id:s,body:t.beforeEditCache_body}),("number"!=typeof l.planned_time||o()(l.planned_time))&&n("updateState",{id:s,planned_time:0}),l.planned_time!=t.beforeEditCache_planned_time&&i("patch",{id:s,field:"planned_time"}),l.body!=t.beforeEditCache_body&&(i("patch",{id:s,field:"body"}),i("copyParentBodyToAllChildren",{parent_id:s})),n("updateState",{beforeEditCache_body:null}),n("updateState",{beforeEditCache_planned_time:null})},cancelEdit:function(e){var t=e.state,n=e.commit,i=(e.dispatch,e.getters),o=t.editingItem?t.editingItem:t.editingItemTags;o&&(i.mobile&&store.$refs["edit-item-modal-"+o].close(),t.editingItem&&Vue.nextTick(function(){console.log("cancel edit. Reverting to: "+t.beforeEditCache_body),n("updateState",{id:o,body:t.beforeEditCache_body}),n("updateState",{id:o,planned_time:t.beforeEditCache_planned_time})}),n("updateState",{editingItem:null}),n("updateState",{editingItemTags:null}),n("updatePopouts",{edit:[]}))},cancelEditOrAdd:function(e){var t=e.state,n=(e.commit,e.dispatch);e.getters;n("blockBlur"),t.addingNewUnder?n("cancelAddNew"):(t.editingItem||t.editingItemTags)&&n("cancelEdit")},cancelAddNew:function(e){var t=e.state;e.commit,e.dispatch;e.getters.mobile&&store.$refs["add-item-modal"].close(),console.log("cancelAddNew"),t.selection.selectedId!=t.addingNewUnder&&null!=t.selection.selectedId||(t.selection.selectedId=t.selection.lastSelectedId),t.addingNewUnder=null,t.addingNewAsChild=!1},addNew:function(e){var t=e.state,i=(e.commit,e.dispatch),o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{addNextItemAs:null},a=r.addNextItemAs;i("blockBlur"),o.mobile&&"stop"==a&&store.$refs["add-item-modal"].close(),console.log("addingNew");var d=JSON.parse(s()(t.newItem));d.newItem=null;var c=t.addingNewUnder,u=o["newItem/preparedPlusComputedTags"];if(d.body){!c&&t.selection.selectedId?c=t.selection.selectedId:c||t.selection.selectedId||(c=t.root.id);var f=t.nodes[c];d.parent_id=f.parent_id?f.parent_id:t.root.id,d.depth=f.depth?f.depth:1;var g=o.siblingIndex(f.id),m=isNaN(g)?0:g+1;if(console.log("\n\t\tadding new item["+d.body+"]\n\t\twith parent id = "+d.parent_id+"\n\t\tdepth = "+d.depth+"\n\t\tindex = "+m),t.addingNewAsChild&&(d.depth=f.depth+1,d.parent_id=f.id,m=0),"journal"==t.selection.view){d.done=1;var p=f&&0!=f.depth?f.done_date:n.i(l.c)(new Date,"YYYY-MM-DD HH:mm:ss");d.done_date=p}o["selection/dueTodayFiltered"]&&o.isTopLvlItemInFilteredRoot(f.id)&&!t.addingNewAsChild&&(d.due_date=n.i(l.c)(new Date,"YYYY-MM-DD HH:mm:ss"),u=u.filter(function(e){return"Today"!=e})),console.log("sending newItem:"),console.log(JSON.parse(s()(d))),console.log("sending tags:"),console.log(u),store.commit("resetNewItem"),i("addTempNewItem",{item:d,index:m,addNextItemAs:a,addTags:u}).then(function(){return i("postNewItem",{newItem:d,index:m,addNextItemAs:a,addTags:u,duplication:null})})}},showChildren:function(e){var t=e.state,n=e.commit,i=e.dispatch,o=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=o.id,a=o.action;r=r||t.selection.selectedId;var d=t.nodes[r];if(d.children&&d.children.length){if("show"==a){if(d.show_children)return;n("updateState",{id:r,show_children:!0})}else if("hide"==a){if(!d.show_children)return;n("updateState",{id:r,show_children:!1})}else n("updateState",{id:r,show_children:!d.show_children});i("patch",{id:r,field:"show_children"})}},markDone:function(e){var t=e.state,n=e.commit,i=e.dispatch,o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.id,d=r.markAs;if(a=a||t.selection.selectedId){var s=t.nodes[a];if(s){if(console.log("marking ("+a+") "+s.body+" as... "+d),"notDone"==d)return n("updateState",{id:a,done:!1}),void i("prepareDonePatch",{id:a});s.children.length&&!o.allChildrenDone(a)||("done"==d?n("updateState",{id:a,done:!0}):n("updateState",{id:a,done:!s.done}),i("prepareDonePatch",{id:a}))}}},indent:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.id;r=r||t.selection.selectedId;var a=i.olderSiblingId(r);if(a==t.nodes[r].parent_id)return void console.log("bump! ceiling!");console.log("new_parent_id / olderSiblingId: "+a),n("giveNewParent",{id:r,new_parent_id:a})},unindent:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.id;r=r||t.selection.selectedId;for(var a=t.nodes[r].depth,d=i.olderSiblingId(r),s=t.nodes[d].depth;s!=a-1;)d=i.olderSiblingId(d),s=t.nodes[d].depth;var l=d,c=s;return console.log("new_parent: "+l),l?0==c&&1==a?void console.log("crash! floor!"):(l==t.nodes[r].parent_id&&(l=t.nodes[l].parent_id),void n("giveNewParent",{id:r,new_parent_id:l})):void console.log("crash! floor!")},selectItem:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:t.selection.selectedId},r=o.id,a=void 0===r?t.selection.selectedId:r,d=o.direction,s=void 0;if(d){if("next"==d)s=a&&a!=t.root.id?i.nextItemId(a):i.filteredIdsTree[0];else if("prev"==d)if(a&&a!=t.root.id)s=i.prevItemId(a);else{var l=i.filteredIdsTree;s=l[l.length-1]}}else s=a;t.selection.selectedId=s,n("scrollToItemIfNeeded",{id:s})},setToday:function(e){var t=e.state,n=(e.commit,e.dispatch),i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.id;if(r=r||t.selection.selectedId){var a=t.nodes[r];if(a)return i.hasParentDueToday(r)&&"0000-00-00 00:00:00"==a.due_date?void console.log("parent is already due"):void n("setDueDate",{id:r})}},setTomorrow:function(e){var t=e.state,i=(e.commit,e.dispatch),o=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=o.id;if(r=r||t.selection.selectedId){var a=f(new Date,{days:1});a=n.i(l.c)(a,"YYYY-MM-DD HH:mm:ss"),i("setDueDate",{id:r,duedate:a})}},setDueDate:function(e){var t=e.state,i=(e.commit,e.dispatch),o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{duedate:!1},a=r.id,d=r.duedate,s=d?new Date(d):new Date,c=new Date(t.nodes[a].due_date.replace(/-/g,"/")),u=n.i(l.b)(c,s);s=0==u?"0000-00-00 00:00:00":n.i(l.c)(s,"YYYY-MM-DD hh:mm:ss"),t.nodes[a].due_date=s,0==u&&o["selection/dueTodayFiltered"]&&(t.selection.selectedId=o.nextItemId(a)),i("patchDueDate",{id:a,duedate:s}),i("updateChildrenDueDate",{id:a})},showAddNewItem:function(e){var t=e.state,n=(e.commit,e.dispatch,e.getters),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:t.selection.selectedId},o=i.id,r=void 0===o?t.selection.selectedId:o,a=i.addAs;n.mobile&&store.$refs["add-item-modal"].open(),r=r||t.root.id,console.log("showing add new item for id: "+r),r&&(t.addingNewUnder=r,t.selection.lastSelectedId=r,t.selection.selectedId=null,t.addingNewAsChild="child"==a,n.mobile&&Vue.nextTick(function(){document.querySelector(".js-edit-body").focus()}))},startEditTags:function(e){var t=e.state,n=(e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=n.id;(i=i||t.selection.selectedId)&&(t.editingItemTags=i)},stopPatching:function(e){var t=e.state;e.commit,e.dispatch,e.getters;window.stopPatchingIcon&&clearTimeout(window.stopPatchingIcon),window.stopPatchingIcon=setTimeout(function(){t.patching=!1}.bind(t),300)},startPatching:function(e){var t=e.state;e.commit,e.dispatch,e.getters;window.stopPatchingIcon&&clearTimeout(window.stopPatchingIcon),t.patching=!0},deleteItemDialogue:function(e){var t=e.state,n=(e.commit,e.dispatch),i=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o=i.id;o=o||t.selection.selectedId,n("popout",{id:o,type:"confirm-delete"})},popup:function(e){var t=e.state,n=(e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=n.id,o=n.type;i=i||t.selection.selectedId;var r=t.nodes[i];t.popups.filter(function(e){return e.item.id===i})[0]||t.popups.push({item:r,type:o,timeout:!0,time:10})},sendFlash:function(e){var t=(e.state,e.commit);e.dispatch,e.getters;t("pushFlash",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},popout:function(e){var t=e.state,n=(e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=n.id,o=n.type;if(i=i||t.selection.selectedId){var r=t.nodes[i];"timer"==o&&(t.popouts.timer.push(r),Vue.nextTick(function(){console.log("emitting playTimer on Vue.nextTick"),Vue.bus.$emit("playTimer",r)})),"confirm-delete"==o&&t.popouts.delete.push(r)}},addTimer:function(e){var t=e.state,n=(e.commit,e.dispatch),i=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:t.selection.selectedId}),o=i.id;n("popout",{id:void 0===o?t.selection.selectedId:o,type:"timer"})},clipboardSuccess:function(e){e.dispatch,e.state,e.getters},clipboardError:function(e){e.dispatch,e.state,e.getters},copyProgrammatic:function(e){var t=e.dispatch,n=e.state,i=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:n.selection.selectedId},r=o.id,a=void 0===r?n.selection.selectedId:r,d=i.clipboardText(a),s=document.createElement("textarea");s.style.position="fixed",s.style.top=0,s.style.left=0,s.style.width="2em",s.style.height="2em",s.style.padding=0,s.style.border="none",s.style.outline="none",s.style.boxShadow="none",s.style.background="transparent",s.value=d,document.body.appendChild(s),s.select();try{document.execCommand("copy");t("sendFlash",{type:"success",msg:n.keybindings.copyClipboard.success[i.language]+"\n\n"+i.clipboardText(a)})}catch(e){t("sendFlash",{type:"error",msg:""+n.keybindings.copyClipboard.error[i.language]})}document.body.removeChild(s)},prepareTag:function(e){var t=e.state;t.newTag&&t.newTag.trim()&&(t.newItem.preparedTags.push(t.newTag),t.newTag=null)},blurOnEditOrAdd:function(e){var t=e.dispatch,n=e.commit,i=e.state,o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{field:null},a=r.field;if(i.addingNewUnder){var d=i.newItem.planned_time?parseFloat(i.newItem.planned_time):0;n("newItem/updateState",{planned_time:d})}if(!i.blockBlur){if(o.mobile&&"add-tag"==a){if(i.editingItem)return void t("tagItem",{id:i.editingItem,tags:i.newTag});if(i.addingNewUnder)return void t("prepareTag")}o.mobile||setTimeout(function(){"INPUT"!=document.activeElement.nodeName&&"TEXTAREA"!=document.activeElement.nodeName&&"A"!=document.activeElement.nodeName&&"BUTTON"!=document.activeElement.nodeName&&(i.editingItem&&(console.log("blurring on edit"),t("doneEdit")),i.editingItemTags&&(console.log("blurring on edit tags"),n("updateState",{editingItemTags:null})),i.addingNewUnder&&(console.log("bluring on Add New"),t("cancelAddNew")))},50)}},doneEditOrCancelNew:function(e){var t=e.state,n=e.dispatch;t.editingItem&&(console.log("blurring on edit"),n("doneEdit")),t.addingNewUnder&&(console.log("bluring on Add New"),n("cancelAddNew"))},doneEditOrAddNew:function(e){var t=e.state,n=e.dispatch,i=e.commit;t.editingItemTags?i("updateState",{editingItemTags:null}):t.editingItem?n("doneEdit"):t.addingNewUnder&&n("addNew")},focusElement:function(e,t){var n=(e.state,t.el);console.log("trying to focus: "+n),document.querySelector(n).focus()},filterItems:function(e){var t=e.state,n=(e.commit,e.dispatch),i=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o=i.keyword,r=i.value,a=i.event;if(!t.editingItem){var d=null;a&&(a.preventDefault(),a.ctrlKey||a.metaKey?d="AND":a.altKey&&(d="NOT")),"journal"!=o||t.fetchedDone||n("fetchDone",{tags:null,operator:d}),n("selection/addKeywords",{keyword:o,value:r,operator:d})}},removeHiddenTag:function(e){var t=e.state,n=(e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=n.tag;t.selection.hiddenTags=t.selection.hiddenTags.filter(function(e){return e!==i})},test:function(e){var t=(e.state,e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});t.id;document.querySelectorAll(".tag-menu a").forEach(function(e){return alert(s()(e.style.color))})},alert:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=(e.state,e.commit,e.dispatch,e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=t.value;alert(n)})}},167:function(e,t,n){"use strict";function i(e,t){var i=JSON.parse(a()(e)),o=t.nodes[i.parent_id];i=n.i(d.a)(i),0==i.depth?(t.root=i,console.log("root-node")):o?o.children.push(i):t.orphans.push(i),t.nodes[i.id]=i}function o(e){if(console.log("organizeData() with fetchedData ↓"),console.log(e),e){var t={};return t.source=e,t.orphans=[],t.nodes={},t.root={},e.forEach(function(e){return i(e,t)}),t}}t.a=o;var r=n(23),a=n.n(r),d=n(45)},168:function(e,t,n){"use strict";var i=n(183),o=n.n(i),r=n(80),a=n.n(r),d=n(7),s=n.n(d),l=n(184),c=n.n(l),u=n(34),f=n(33),g=n(11),m=n(141),p=n(45);t.a={totalPlannedMin:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id,i=e.nodes[n];if(!i)return 0;var o=i.planned_time?parseFloat(i.planned_time):0,r=t.allVisibleChildIds(n);if(!r||!r.length)return o;var a=r.reduce(function(t,n){var i=e.nodes[n],o=i?i.planned_time:0;return t+parseFloat(o)},o);return a?parseFloat(a):0}},totalUsedSec:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id,i=void 0,o=void 0;if("object"===(void 0===n?"undefined":c()(n))&&n.journalDate?(i=n,o=i.children):(i=e.nodes[n],o=t.allVisibleChildIds(n)),!i)return 0;var r=i.used_time?parseFloat(i.used_time):0;if(!o||!o.length)return r;var a=o.reduce(function(t,n){var i=e.nodes[n],o=i?i.used_time:0;return t+parseFloat(o)},r);return a||0}},totalUsedMin:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return Math.floor(t.totalUsedSec(n)/60)}},totalUsedHourMin:function(e,t){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return n.i(m.c)(t.totalUsedSec(i))}},totalPlannedSec:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return 60*t.totalPlannedMin(n)}},totalPlannedHour:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return t.totalPlannedMin(n)/60}},totalMinLeft:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return t.totalPlannedMin(n)-t.totalUsedMin(n)}},totalSecLeft:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return t.totalPlannedSec(n)-t.totalUsedSec(n)}},totalHourMinLeft:function(e,t){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return n.i(m.c)(t.totalSecLeft(i))}},secLeft:function(e,t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id,n=e.nodes[t];return n?60*n.planned_time-n.used_time:0}},minLeft:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root.id;return t.secLeft(n)/60}},totalTimeDifferentFromParent:function(e,t){return function(n){var i=e.nodes[n];return i?!i.parent_id||t.totalPlannedSec(n)!=t.totalPlannedSec(i.parent_id):0}},oS:function(e,t){return f.j.is.platform},hasTag:function(e,t){return function(t,n){var i=e.nodes[t];if(!i)return console.log("[hasTag(id, tags)] what is state shit... id:"+t),!1;if(!i.tagged||!i.tagged.length)return!1;var o=void 0;return Array.isArray(n)||(n=[n]),n.forEach(function(e){e=g.e.tagNameToSlug(e),i.tagged.find(function(t){return t.tag_slug==e})&&(o=!0)}),o}},hasParentWithTag:function(e,t){return function(n,i){if(!n)return!1;var o=(e.nodes[n],e.nodes[n].parent_id);return!!o&&(!!e.nodes[o]&&(!!t.hasTag(o,i)||t.hasParentWithTag(o,i)))}},parentIdWithTag:function(e,t){return function(n,i){var o=e.nodes[n];console.log("id & body = "+o.id+" - "+o.body);var r=e.nodes[n].parent_id;if(!r)return!1;var a=t.hasTag(r,i);return console.log("parentHasTag"),console.log(a),a?r:t.parentIdWithTag(r,i)}},tagsArray:function(e,t){return function(t){var n=e.nodes[t];return n?n.tagged.map(function(e){return e.tag_name}):[]}},makeTagObject:function(e,t){return function(e){return Array.isArray(e)?e.map(function(e){return t.makeTagObject(e)}):{temp:!0,tag_name:e,tag_slug:g.e.tagNameToSlug(e),tag:{temp:!0,name:e,slug:g.e.tagNameToSlug(e)}}}},siblingIndex:function(e,t){return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{visibleChildrenOnly:!1},o=i.visibleChildrenOnly,r=void 0!==o&&o,a=e.nodes[n];if(!a)return!1;var d=a.parent_id;if(!d||!e.nodes[d])return!1;var s=void 0;return s=r?t.visibleDirectChildIds(d):e.nodes[d].children_order,s.indexOf(n)}},olderSiblingId:function(e,t){return function(n){var i=e.nodes[n];if(i){var o=i.parent_id;if(o){var r=e.nodes[o].children_order;if(r.length<=1||0==t.siblingIndex(n))return o;var a=r.indexOf(n);return e.nodes[o].children_order[a-1]}}}},nextItemId:function(e,t){return function(n,i){if(n){var o=e.nodes[n];if(o){if("journal"==e.selection.view){var r=t.filteredIdsFlat.indexOf(n);return r+1==t.filteredIdsFlat.length?t.filteredIdsFlat[0]:t.filteredIdsFlat[r+1]}if(!t.filteredIdsTree.includes(n)||t.visibleDirectChildren(n).length&&o.show_children)return t.visibleDirectChildIds(n).length&&o.show_children?t.visibleDirectChildIds(n)[0]:t.nextItemRecursion(n);var a=t.filteredIdsTree.indexOf(n);return a+1==t.filteredIdsTree.length?t.filteredIdsTree[0]:t.filteredIdsTree[a+1]}}}},nextItemRecursion:function(e,t){return function(n){if(n){if(t.itIsADeepestChild(n)){var i=t.topLvlParentOfDeepestChild(n),o=t.filteredIdsTree.indexOf(i);if(o+1==t.filteredIdsTree.length){var r=t.filteredIdsTree[0];return r==n?null:r}return t.filteredIdsTree[o+1]}var a=t.siblingIndex(n,{visibleChildrenOnly:!0}),d=e.nodes[n].parent_id,s=t.visibleDirectChildIds(d);if(a+1==s.length){if(d==e.root.id)return;return t.nextItemRecursion(d)}return s[a+1]}}},nextSiblingOrParentsSiblingId:function(e,t){return function(n){var i=e.nodes[n];if(i){var o=i.parent_id;if(o){var r=e.nodes[o].children_order,a=t.siblingIndex(n)+1;return a==r.length?t.nextSiblingOrParentsSiblingId(o):r[a]}}}},findDeepestVisibleChild:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selection.selectedId,i=t.visibleDirectChildIds(n);if(!i.length)return n;var o=i[i.length-1];return t.findDeepestVisibleChild(o)}},filteredItemsTreeDeepestChildren:function(e,t){return t.filteredIdsTree.map(function(e){return{id:e,deepestChild:t.findDeepestVisibleChild(e)}})},itIsADeepestChild:function(e,t){return function(e){return e?t.filteredItemsTreeDeepestChildren.map(function(e){return e.deepestChild}).includes(e):void console.log("you need an ID")}},topLvlParentOfDeepestChild:function(e,t){return function(e){return t.filteredItemsTreeDeepestChildren.find(function(t){return t.deepestChild==e}).id}},isFirstItem:function(e,t){return function(e){return!t.noItems&&0==t.siblingIndex(e)}},prevItemId:function(e,t){return function(n,i){if(!n||0==e.nodes[n].depth)return!1;var o=void 0;if("journal"==e.selection.view){var r=t.filteredIdsFlat,a=r.indexOf(n);o=0==a?r[r.length-1]:r[a-1]}else if(t.filteredIdsTree.includes(n)){var d=t.filteredIdsTree,s=d.indexOf(n);o=0==s?t.findDeepestVisibleChild(d[d.length-1]):t.findDeepestVisibleChild(d[s-1])}else{var l=e.nodes[n],c=t.siblingIndex(n,{visibleChildrenOnly:!0});if(0==c)o=l.parent_id;else{var u=t.visibleDirectChildIds(l.parent_id)[c-1];o=t.findDeepestVisibleChild(u)}}return o}},isTopLvlItemInFilteredRoot:function(e,t){return function(n){return(!t["selection/nothingSelected"]||"tree"!=e.selection.view)&&(n==e.root.id||t.filteredIdsTree.includes(n))}},hasParentDueToday:function(e,t){return function(i){i=i||e.selection.selectedId;var o=e.nodes[i];if(!o.parent_id)return!1;var r=e.nodes[o.parent_id];return!!r&&(n.i(u.b)(new Date(r.due_date.replace(/-/g,"/")),new Date)<=0||t.hasParentDueToday(o.parent_id))}},isDueToday:function(e,t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selection.selectedId,i=e.nodes[t];return!!i&&n.i(u.b)(new Date(i.due_date.replace(/-/g,"/")),new Date)<=0}},isProject:function(e,t){return function(t){if(!t)return!1;var n=e.nodes[t];return!!n&&(console.log("\n["+t+"] "+n.body+" isProject?\n\t\t"),":"==e.nodes[t].body.slice(-1))}},itemTagArray:function(e,t){return function(t){return e.nodes[t].tagged.map(function(e){return e.tag_name})}},allChildrenDone:function(e,t){return function(t){var n=e.nodes[t].children;if(!n.length)return!1;var i=n.reduce(function(e,t){var n=t.done?1:0;return g.e.AplusB(n,e)},0);return n.length==i}},calTotalPlannedTime:function(e,t){return function(t){var n=e.nodes[t],i=void 0;return i=Array.isArray(n.children)&&n.children.length?n.children.reduce(function(e,t){var n=t.totalPlannedTime?t.totalPlannedTime:t.planned_time;return e+parseFloat(n)},n.done&&"journal"!=e.selection.view?0:parseFloat(n.planned_time)):n.done&&"journal"!=e.selection.view?0:parseFloat(n.planned_time),parseFloat(i)}},calTotalUsedTime:function(e,t){return function(t){var n=e.nodes[t];if(!n)return 0;var i=void 0;return i=Array.isArray(n.children)&&n.children.length?n.children.reduce(function(e,t){var n=t.totalUsedTime?t.totalUsedTime:t.used_time;return e+parseFloat(n)},n.done&&"journal"!=e.selection.view?0:parseFloat(n.used_time)):n.done&&"journal"!=e.selection.view?0:parseFloat(n.used_time),parseFloat(i)}},checkValParentTree:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return function(n,i){var o=e.nodes[n].parent_id;if(console.log("checkValParentTree pId: "+checkValParentTree),!o)return!1;var r=e.nodes[o].item[i];return console.log("checkValParentTree checkVal: "+r),r||t.checkValParentTree(o,i)}}),getParentsAsArray:function(e,t){return function(e){var n=[];return t.getParentsRecursive(e,n),n.reverse().shift(),n}},getParentsRecursive:function(e,t){return function(n,i){var o=e.nodes[n].parent_id;o&&(i.push(e.nodes[o].body),t.getParentsRecursive(o,i))}},setDefaultItemValues:function(e,t){return function(e){return n.i(p.a)(e)}},countChildren:function(e,t){return function(e){return e&&e.children?t.flattenTree(e.children).length:0}},countDoneChildren:function(e,t){return function(e){return e.children?t.flattenTree(e.children).filter(function(e){return e.done}).length:0}},language:function(e,t){return e.setLanguage?e.setLanguage:defaultLanguage||"en"},text:function(e,t){return e.languageContents[t.language]},desktop:function(e,t){return f.j.is.desktop},mobile:function(e,t){return!!e.manualMobile||f.j.is.mobile},mobileSmall:function(e,t){if(window.innerWidth<385)return!0},noItems:function(e,t){return!t.visibleDirectChildren(e.root.id).length},editingOrAddingId:function(e,t){return e.editingItemTags?e.editingItemTags:e.editingItem?e.editingItem:e.addingNewUnder?e.addingNewUnder:void 0},filteredItems:function(e,t){return t.filteredItemsTree},filteredItemsJournal:function(e,t){if("journal"!=e.selection.view)return[];var i={};return t.filteredItemsFlat.forEach(function(t){if(t.done){var o=n.i(u.c)(t.done_date,"YYYY-MM-DD");if(i[o]||(i[o]={date:o,items:[]}),!e.userSettings.journalShowParentBodies)return void i[o].items.push(t);var r=t.parents_bodies?t.parents_bodies:"null_no_parent_body",a=i[o].items.find(function(e){return e.parentBody==r});a?a.items.push(t):i[o].items.push({parentBody:r,items:[t]})}}),s()(i).map(function(e){return i[e]})},journalDates:function(e,t){return s()(t.filteredItemsJournal)},filteredIdsFlat:function(e,t){if(e.loading)return[];console.log("running filteredIdsFlat");var n=s()(e.nodes).map(function(e){return Number(e)?Number(e):e});return t["selection/noFilterOrTag"]?n.filter(function(t){return t!=e.root.id}):n.filter(function(n){return n!=e.root.id&&t["selection/testAgainstAllSelection"](n,{flat:!0})})},filteredItemsFlat:function(e,t){var i=t.filteredIdsFlat.map(function(t){return e.nodes[t]}).filter(function(e){return void 0!==e});return"journal"==e.selection.view&&(i=n.i(g.l)(i,"done_date","parents_bodies","desc","asc")),i},filteredIdsTree:function(e,t){return t.filteredItemsTree.map(function(e){return e.id})},filteredItemsTree:function(e,t){if(e.loading)return[];var i=[];i=t["selection/noFilterOrTag"]?e.root.children_order:s()(e.nodes).map(function(e){return Number(e)?Number(e):e}).filter(function(n){return n!=e.root.id&&t["selection/testAgainstAllSelection"](n,{flat:!1})}),console.log("Filtered Items Tree, IDs:"),console.log(i);var o=i.map(function(t){return e.nodes[t]});return t["selection/dueTodayFiltered"]?o=n.i(g.l)(o,"done_date","due_date","asc","desc"):"journal"==e.selection.view&&(o=n.i(g.l)(o,"done_date","parents_bodies","desc","asc")),o},allVisibleChildItems:function(e,t){return function(e){var n=t.visibleDirectChildren(e);return t.flattenTree(n).filter(function(e){return t.filteredIdsFlat.includes(e.id)})}},allVisibleChildIds:function(e,t){return function(e){return t.allVisibleChildItems(e).map(function(e){return e.id})}},visibleDirectChildren:function(e,t){return function(n){if(n==e.root.id)return t.filteredItems;var i=e.nodes[n];return i&&i.children.length&&i.show_children?i.children.filter(function(e){return t.filteredIdsFlat.includes(e.id)}):[]}},visibleDirectChildIds:function(e,t){return function(e){return t.visibleDirectChildren(e).map(function(e){return e.id})}},flattenTree:function(e,t){return function(e){var n=[];return e.forEach(function(e){n.push(e),e.children.length&&Array.prototype.push.apply(n,t.flattenTree(e.children))}),n}},clipboardText:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selection.selectedId;n=n||e.root.id;var i=e.nodes[n],o=void 0,r=void 0,a=0;return t["selection/dueTodayFiltered"]?r=!0:a=parseFloat(i.depth),i=e.nodes[n],o=t.allVisibleChildItems(n),i?o.reduce(function(e,t){return e+"\n"+"　　".repeat(r?0:parseFloat(t.depth)-a)+"・"+t.body},""+i.body):""}},clipboardTextFromItem:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selection.selectedId,i=void 0,o=void 0,r=void 0,a=0;return"object"===(void 0===n?"undefined":c()(n))?(i=n,o=i.children,r=!0):(i=e.nodes[n],o=t.allVisibleChildItems(n),a=parseFloat(i.depth)),i?o.reduce(function(e,t){return e+"\n"+"　　".repeat(r?0:parseFloat(t.depth)-a)+"・"+t.body},""+i.body):""}},clipboardTextJournal:function(e,t){return function(e){var i=t.totalUsedMin(e)?"\n"+t.text.menu.usedTime+": "+n.i(m.c)(t.totalUsedSec(e)):"",o=t.journalDate(e)+"\n=========="+i;return e.children.reduce(function(e,t){var n=t.completion_memo?"\n　　"+t.completion_memo:"";return e+(e.includes("【"+t.parents_bodies+"】")?"":"\n【"+t.parents_bodies+"】")+"\n・"+t.body+n},o)}},journalDate:function(e,t){return function(t){return!(!t||"journal"!=e.selection.view||!t.journalDate)&&t.done_date}},allTagsComputed:function(e,t){var i=performance.now();if(t.noItems)return[];var o=[],r=t.filteredItemsFlat.length?t.filteredItemsFlat:[];if(!r.length)return[];r.forEach(function(e){e.tagged.forEach(function(e){if(e.tag&&e.tag.name){o.find(function(t){return t.name==e.tag.name}.bind(e))||o.push(e.tag)}}.bind(o))}.bind(o)),o=n.i(g.g)(o,"name");var a=performance.now();return console.log("Call to allTagsComputed took "+(a-i)+" milliseconds."),o},allTagsComputed_2:function(e,t){var i=performance.now();if(t.noItems)return[];var o=[],r=t.filteredItemsFlat.length?t.filteredItemsFlat:[];if(console.log("allTagsComputed_2"),!r.length)return[];o=r.reduce(function(e,t){var n=t.tagged.map(function(e){return e.tag}).filter(function(e){return e});return e.concat(n)},[]),o=n.i(g.m)(o),o=n.i(g.g)(o,"name");var a=performance.now();return console.log("Call to allTagsComputed_2 took "+(a-i)+" milliseconds."),o},allTagsComputed_3:function(e,t){var i=performance.now();if(t.noItems)return[];var r=new a.a,d=t.filteredItemsFlat.length?t.filteredItemsFlat:[];if(!d.length)return[];d.forEach(function(e){e.tagged.length&&e.tagged.forEach(function(e){e&&r.add(e.tag)})}.bind(r)),r=[].concat(o()(r)),r=n.i(g.m)(r),r=n.i(g.g)(r,"name");var s=performance.now();return console.log("Call to allTagsComputed_3 took "+(s-i)+" milliseconds."),r},allTagsComputed_1b:function(e,t){var i=performance.now();if(t.noItems)return[];var o=[],r=t.filteredItemsFlat.length?t.filteredItemsFlat:[];if(!r.length)return[];r.forEach(function(e){e.tagged.forEach(function(e){if(e.tag&&e.tag.name){o.find(function(t){return t.name==e.tag.name}.bind(e))||o.push(e.tag)}}.bind(o))}.bind(o)),o=n.i(g.g)(o,"name");var a=performance.now();return console.log("Call to allTagsComputed 1b took "+(a-i)+" milliseconds."),o},itemAmount:function(e,t){return t.filteredIdsFlat.length},doneItemAmount:function(e,t){return t.filteredItemsFlat.filter(function(e){return e.done}).length},lastItems:function(e,t){if(t.noItems)return[];var n=t.filteredIdsTree[t.filteredIdsTree.length-1];return[n,t.findDeepestVisibleChild(n)]},firstItem:function(e,t){return t.noItems?null:t.filteredIdsTree[0]}}},169:function(e,t,n){"use strict";t.a={copyClipboard:{mac:"",win:"",name:{en:"copy",ja:"コピー"},guide:{en:"Copy to clipboard",ja:"クリップボードにコピー"},popmenu:{en:"Copy to clipboard",ja:"クリップボードにコピー"},success:{en:"Copied successfully! Now go paste!",ja:"コピーしました！どこかにペーストしましょう！"},error:{en:"There was an error copy'ing! Please let <a href='mailto:mesqueeb@gmail.com'>Luca Ban</a> know!",ja:"コピーしようとしたけど、エラーが起きました！<a href='mailto:mesqueeb@gmail.com'>バン・ルカへのお知らせ</a>ください！"}},delete:{mac:"⌫",win:"⌫",name:{en:"delete",ja:"削除"},guide:{en:"Delete item",ja:"削除"},popmenu:{en:"Delete item",ja:"削除"}},setToday:{mac:"T",win:"T",name:{en:"do today",ja:"今日やる"},guide:{en:"Do <u>T</u>oday",ja:"今日に設定"},popmenu:{en:"Do <u>T</u>oday",ja:"今日に設定"}},setTomorrow:{mac:"-",win:"-",name:{en:"do tomorrow",ja:"明日やる"},guide:{en:"Do tomorrow",ja:"明日に設定"},popmenu:{en:"Do tomorrow",ja:"明日に設定"}},timer:{mac:"S",win:"S",name:{en:"timer",ja:"タイマー"},guide:{en:"<u>S</u>topwatch / Timer",ja:"ストップウォッチ / タイマー"},popmenu:{en:"",ja:""}},indent:{mac:"tab",win:"tab",name:{en:"",ja:""},guide:{en:"Indent item",ja:"アイテムを右へ"},popmenu:{en:"",ja:""}},add:{mac:"enter",win:"enter",name:{en:"",ja:""},guide:{en:"Add item",ja:"アイテムを追加"},popmenu:{en:"",ja:""}},edit:{mac:"⌘ enter",win:"ctrl enter",name:{en:"edit",ja:"編集"},guide:{en:"Edit item",ja:"アイテムを編集"},popmenu:{en:"Edit item",ja:"アイテムを編集"}},editTag:{mac:"shift T",win:"shift T",name:{en:"",ja:""},guide:{en:"Edit tags",ja:"タグを編集"},popmenu:{en:"",ja:""}},hideTag:{mac:"alt click",win:"alt click",name:{en:"",ja:""},guide:{en:"Hide tag",ja:"タグのアイテムを非表示"},popmenu:{en:"",ja:""}},move:{mac:"⌘ ↑↓",win:"ctrl ↑↓",name:{en:"",ja:""},guide:{en:"Move item up/down",ja:"アイテムを上下へ移動"},popmenu:{en:"",ja:""}},duplicate:{mac:"⌘ shift D",win:"ctrl shift D",name:{en:"",ja:""},guide:{en:"Duplicate item",ja:"アイテムを複製"},popmenu:{en:"Duplicate item",ja:"アイテムを複製"}}}},170:function(e,t,n){"use strict";var i=n(7),o=n.n(i),r=n(23),a=n.n(r),d=n(11),s=n(167),l=n(71),c=n.n(l);t.a={state:{token:null},mutations:{destroyToken:function(e){window.axios.defaults.headers.common={"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "},e.token=null},setToken:function(e,t){var n=t.token;window.axios.defaults.headers.common={"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+n},e.token=n}},actions:{logout:function(e){var t=e.commit,n=e.dispatch,i=(e.getters,e.rootState,e.state);if(t("updateState",{loading:!0}),i.token){var o=JSON.parse(a()(i.token));c.a.post(apiBaseURL+"logout",{token:o}).then(function(e){var t=e.data;console.log(t)}),t("destroyToken")}n("resetStore").then(function(){t("updateState",{loading:!1})})},login:function(e,t){var n=e.commit,i=e.dispatch;e.getters,e.rootState;i("resetStore"),n("updateState",{loading:!0}),c.a.post(apiBaseURL+"auth",t).then(function(e){var t=e.data;n("setToken",{token:t.token}),i("fetchListo"),router.push("/")}).catch(function(e){var t=e.response,r=t.data;n("updateState",{loading:!1}),console.log(r);var a=o()(r).map(function(e){return r[e]}).map(function(e,t){return e[t]}).join("<br>");i("sendFlash",{msg:a})})},register:function(e,t){var n=e.commit,i=e.dispatch;e.getters,e.rootState;n("updateState",{loading:!0}),c.a.post(apiBaseURL+"register",t).then(function(e){var t=e.data;n("setToken",{token:t.token}),i("fetchListo"),router.push("/")}).catch(function(e){var t=e.response,r=t.data;n("updateState",{loading:!1}),console.log(r);var a=o()(r).map(function(e){return r[e]}).map(function(e,t){return e[t]}).join("<br>");i("sendFlash",{msg:a})})},fetchListo:function(e){var t=e.commit,n=e.dispatch;t("updateState",{loading:!0}),console.log("start fetching all items"),console.log(c.a.defaults.headers.common),c.a.get(apiBaseURL+"items").then(function(e){var i=e.data;console.log("fetched all items"),n("initializeState",{data:i}).then(function(){t("updateState",{loading:!1}),n("getUser")}).catch(function(e){console.log("ERROR: "+e)})}).catch(function(e){console.log("ERROR: "+e)})},initializeState:function(e,t){var i=e.dispatch,o=e.commit,r=t.data,a=n.i(s.a)(r);window.userData=a,o("updateState",{source:a.source}),o("updateState",{orphans:a.orphans}),o("updateState",{root:a.root}),o("updateState",{nodes:a.nodes}),i("sortAllChildren")},getUser:function(e){var t=e.dispatch,n=e.commit;c.a.get(apiBaseURL+"user").then(function(e){var i=e.data;console.log(i),n("user/updateState",{user:i.user}),t("sendFlash",{msg:"Hello "+i.user.name+"!"})}).catch(function(e){console.log("ERROR: "+e.response)})},patch:function(e){var t=e.commit,i=e.dispatch,o=e.getters,r=e.rootState,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.id,l=a.field,u=a.value;if(!r.user.user)return void console.log("not Logged in");if(!s.toString().includes("tempItem")){i("startPatching");var f={},g=u||r.nodes[s][l];"children_order"==l&&(g=n.i(d.i)(g)),f[l]=g,c.a.patch(apiBaseURL+"items/"+s,f,{method:"PATCH"}).then(function(e){console.log("patched "+s+"["+r.nodes[s].body+"]."+l+" = "+f[l]),i("stopPatching")},function(e){t("updateState",{patching:"error"});var n=o.text.flashes.ajaxError;console.log(n),i("sendFlash",{type:"ajaxError",msg:n})})}},patchTag:function(e){var t=e.rootState,n=e.dispatch,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.id,r=i.tags,a=i.requestType;if(!t.user.user)return void console.log("not Logged in");if(!o.toString().includes("tempItem")){n("startPatching");var d={};d.tags=r,d.type=a,c.a.patch(apiBaseURL+"itemtags/"+o,d,{method:"PATCH"}).then(function(e){e.data.tags;console.log("tagged ["+t.nodes[o].body+"] with: "+e.data.tags+";"),console.log(e),c.a.get(apiBaseURL+"itemtags/"+o,{type:"tags"}).then(function(e){t.nodes[o].tagged=e.data,console.log("updatedTagList of ["+t.nodes[o].body+"] with: "+e.data.map(function(e){return e.tag_name})+";")}),n("stopPatching")})}},patchDueDate:function(e){var t=e.dispatch,n=e.rootState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.id,r=i.duedate;if(!n.user.user)return void console.log("not Logged in");if(!o.toString().includes("tempItem")){if(t("startPatching"),"0000-00-00 00:00:00"==r)return void c.a.patch(apiBaseURL+"items/"+o,{due_date:r}).then(function(e){t("stopPatching")});r=new Date(r.replace(/-/g,"/")),console.log("PatchDueDate: "+r),c.a.patch(apiBaseURL+"items/"+o,{due_date:r}).then(function(e){t("stopPatching")})}},patchDone:function(e){var t=e.rootState,n=e.dispatch,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.id;if(!t.user.user)return void console.log("not Logged in");if(!o.toString().includes("tempItem")){n("startPatching");var r=void 0,a=t.nodes[o].done;r=a?new Date:"0000-00-00 00:00:00",c.a.patch(apiBaseURL+"items/"+o,{done:a,done_date:r}).then(function(e){n("stopPatching")})}},deleteItemApi:function(e){var t=e.rootState,n=e.dispatch,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.idOrArray;if(!t.user.user)return void console.log("not Logged in");if(n("startPatching"),Array.isArray(o)&&o.length){o.forEach(function(e){n("deleteItemApi",{idOrArray:e})})}else{var r=o;if(r.toString().includes("tempItem"))return;if(!r)return;var a=t.nodes[r];c.a.delete(apiBaseURL+"items/"+r).then(function(e){console.log("deleted: "+r+"["+a.body+"]"),n("stopPatching")})}},fetchDone:function(e){var t=e.rootState,n=e.dispatch,i=(e.getters,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});i.tags,i.operator;if(!t.user.user)return void console.log("not Logged in");t.loading=!0,c.a.get(apiBaseURL+"items/fetchdone").then(function(e){t.fetchedDone=!0,console.log("fetched Done");var i=e.data;if(console.log(i),!i.length)return console.log("no done items..."),void(t.loading=!1);i.forEach(function(e){n("addAndCleanNodesRecursively",{item:e})}),t.selection.view=null,t.selection.view="journal",t.loading=!1})},postNewItem:function(e){var t=e.rootState,i=e.dispatch,o=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.newItem,s=r.index,l=r.addNextItemAs,u=r.addTags,f=r.duplication;if(console.log("posting newItem..."),console.log(a),!t.user.user)return void console.log("not Logged in");i("startPatching"),a.children_order&&(a.children_order=n.i(d.i)(a.children_order));var g=a;c.a.post(apiBaseURL+"items",g).then(function(e){var t=e.data;console.log("starting dom update..."),console.log("Index: "),console.log(s),i("addItem",{item:t,index:s,addNextItemAs:l,addTags:u,duplication:f}),i("stopPatching")},function(e){t.patching="error";var n=o.text.flashes.ajaxError;console.log(n),i("sendFlash",{type:"ajaxError",msg:n})})},patchRootChildrenOrderWithFilter:function(e){var t=e.rootState,n=(e.dispatch,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=n.id;if(!t.user.user)return void console.log("not Logged in");i.toString().includes("tempItem")||c.a.get(apiBaseURL+"items/"+t.root.id).then(function(e){var n=e.data.children_order;n=n+","+i,c.a.patch(apiBaseURL+"items/"+t.root.id,{children_order:n}).then(function(e){var t=e.data.children_order;console.log("newRootChildrenOrder = "+t)})})}},getters:{someGetter:function(e,t,n,i){return function(e){t.someOtherGetter,i.someOtherGetter}}}}},171:function(e,t,n){"use strict";function i(){return{body:"",due_date:"0000-00-00 00:00:00",done_date:"0000-00-00 00:00:00",done:!1,planned_time:"",preparedTags:[],children:[],children_order:[],newItem:!0}}var o=n(7),r=n.n(o),a=n(22),d=n.n(a),s=n(11);t.a={namespaced:!0,state:i(),mutations:{resetStateData:function(e){var t=i();e=d()(e,t)},updateState:function(e,t){var n=t.field,i=t.value;if(n||i||(n=r()(t).filter(function(e){return"id"!=e})[0],i=t[n]),t.id)return void(e.nodes[t.id][n]=i);e[n]=i},deleteTag:function(e,t){var n=t.tag;e.preparedTags=e.preparedTags.filter(function(e){return e!=n})}},actions:{someAction:function(e){var t=(e.state,e.rootState,e.getters),n=e.rootGetters,i=e.dispatch,o=e.commit,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.id;t.someOtherGetter,n.someOtherGetter,i("someOtherAction"),i("someOtherAction",null,{root:!0}),o("someMutation"),o("someMutation",null,{root:!0})}},getters:{someGetter:function(e,t,n,i){return function(e){t.someOtherGetter,i.someOtherGetter}},parent_id:function(e,t,n,i){return n.addingNewUnder&&n.addingNewUnder!=n.root.id?n.addingNewAsChild||n.addingNewAsFirstChild?n.addingNewUnder:n.nodes[n.addingNewUnder]?n.nodes[n.addingNewUnder].parent_id:null:n.root.id},preparedPlusComputedTags:function(e,t,i,o){var r=e.preparedTags,a=o.tagsArray(t.parent_id);return r=r.concat(a),r=r.concat(i.selection.tags.map(function(e){return s.e.tagSlugToName(e)})),r=n.i(s.h)(r),r.sort()}}}},172:function(e,t,n){"use strict";function i(){return{selectedId:null,lastSelectedId:null,filter:{dueDate:{from:null,to:null},doneDate:{from:null,to:null}},tags:[],hiddenTags:[],hiddenItems:[],hiddenBookmarks:[],view:"tree"}}var o=n(7),r=n.n(o),a=n(22),d=n.n(a),s=n(34);t.a={namespaced:!0,state:i(),mutations:{resetStateData:function(e){var t=i();e=d()(e,t)},clear:function(e){e.filter={dueDate:{from:null,to:null},doneDate:{from:null,to:null}},e.tags=[],e.hiddenTags=[],e.hiddenItems=[],e.hiddenBookmarks=[]},clearTags:function(e){e.hiddenTags=[],e.tags=[]},clearFilters:function(e){e.filter={dueDate:{from:null,to:null},doneDate:{from:null,to:null}},e.hiddenBookmarks=[]},updateState:function(e,t){var n=t.field,i=t.value;if(n||i||(n=r()(t).filter(function(e){return"id"!=e})[0],i=t[n]),t.id)return void(e.nodes[t.id][n]=i);e[n]=i}},actions:{addKeywords:function(e,t){var n=e.state,i=(e.rootState,e.getters,e.rootGetters),o=(e.dispatch,e.commit),r=t.keyword,a=t.value,d=t.operator;if("tag"==r)if("NOT"==d){if(n.hiddenTags.includes(a))return;n.hiddenTags.push(a),n.tags=n.tags.filter(function(e){return e!==a})}else n.tags.includes(a)?n.tags=n.tags.filter(function(e){return e!==a}):n.hiddenTags.includes(a)?n.hiddenTags=n.hiddenTags.filter(function(e){return e!==a}):(d||o("clearTags"),n.tags.push(a));else{if(d&&"all"!=r||o("clearFilters"),"all"==r&&(n.view="tree"),"NOT"==d&&"journal"==r)return void n.hiddenBookmarks.push(r);"journal"==r?(n.view="journal",n.filter.doneDate.to=a):n.view="tree","duedate"==r&&(n.filter.dueDate.to=a)}Vue.nextTick(function(){i.filteredItemsFlat.map(function(e){return e.id}).includes(n.selectedId)||(n.selectedId=null)})}},getters:{nothingSelected:function(e,t){return t.noTagsSelected&&t.noFiltersSelected&&!e.hiddenItems.length&&!e.hiddenBookmarks.length},noFilterOrTag:function(e,t){return t.noTagsSelected&&t.noFiltersSelected},noTagsSelected:function(e){return!e.tags.length&&!e.hiddenTags.length},noFiltersSelected:function(e,t){return!t.dueDateFiltered&&!t.doneFiltered},dueDateFiltered:function(e){return null!=e.filter.dueDate.from||null!=e.filter.dueDate.to},doneFiltered:function(e){return null!=e.filter.doneDate.from||null!=e.filter.doneDate.to},dueTodayFiltered:function(e){return 0==n.i(s.b)(e.filter.dueDate.to,new Date)},getHiddenItemsTotalUsedTime:function(e,t){return e.hiddenItems.length?e.hiddenItems.reduce(function(t,n){var i=e.nodes[n];return i?t+i.used_time:t},0):0},getHiddenItemsTotalPlannedTime:function(e,t){return e.hiddenItems.length?e.hiddenItems.reduce(function(t,n){var i=e.nodes[n];return i?t+i.planned_time:t},0):0},testAgainstTagSelection:function(e,t,n,i){return function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{flat:!1},r=o.flat,a=void 0!==r&&r;if(!e.tags.length&&!e.hiddenTags.length)return!0;var d=!1;if(e.hiddenTags.length&&(d=e.hiddenTags.some(function(e){return i.hasTag(t,e)})),e.hiddenTags.length&&e.tags.length)return!d&&n.root.children_order.includes(t);var s=!0,l=!1;return e.tags.length&&(s=e.tags.every(function(e){return i.hasTag(t,e)}),l=e.tags.every(function(e){return i.hasParentWithTag(t,e)})),a?s&&!d:s&&!d&&!l}},testAgainstDueDateSelection:function(e,t,n,i){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{flat:!1},o=n.flat,r=void 0!==o&&o,a=!0;if(t.dueTodayFiltered){var d=i.isDueToday(e),s=i.hasParentDueToday(e);a=r?!(!d&&!s):!(!d||s)}return a}},testAgainstDoneSelection:function(e,t,i,o){return function(e){var o=!0,r=i.nodes[e];if(!r)return!1;if(t.doneFiltered)o=!!r.done;else{var a=r.done_date?r.done_date.replace(/-/g,"/"):"0000-00-00 00:00:00",d=n.i(s.b)(new Date(a),new Date);o=!r.done||d>=0}return o}},testAgainstHiddenItems:function(e,t,n,i){return function(t){return e.hiddenItems.every(function(e){return e!=t})}},testAgainstAllSelection:function(e,t,n,i){return function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{flat:!1},r=o.flat,a=void 0!==r&&r,d=!0;if(a)d=t.testAgainstTagSelection(n,{flat:!0})&&t.testAgainstDueDateSelection(n,{flat:!0})&&t.testAgainstDoneSelection(n)&&t.testAgainstHiddenItems(n),console.log("\n\t\t\t\t⎡⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺ testing "+n+" flat! ⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎤\n\t\t\t\t⎜　testAgainstTagSelection = "+t.testAgainstTagSelection(n,{flat:!0})+"\n\t\t\t\t⎜　testAgainstDueDateSelection = "+t.testAgainstDueDateSelection(n,{flat:!0})+"\n\t\t\t\t⎜　testAgainstDoneSelection = "+t.testAgainstDoneSelection(n)+"\n\t\t\t\t⎜　testAgainstHiddenItems = "+t.testAgainstHiddenItems(n)+"\n\t\t\t\t⎣______________________________________________________⎦\n\t\t\t\t");else{var s=t.testAgainstDoneSelection(n),l=t.testAgainstHiddenItems(n);if(e.tags.length&&t.dueTodayFiltered){var c=i.hasParentDueToday(n),u=void 0;if(e.tags.length&&(u=e.tags.every(function(e){return i.hasParentWithTag(n,e)})),c&&u)return!1;d=t.testAgainstTagSelection(n,{flat:!0})&&t.testAgainstDueDateSelection(n,{flat:!0})&&s&&l,console.log("\n\t\t\t\t\t⎡⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺ testing ("+n+") tree structure! ⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎤\n\t\t\t\t\t⎜　passedTagTest = "+t.testAgainstTagSelection(n,{flat:!0})+"\n\t\t\t\t\t⎜　passedDueDateTest = "+t.testAgainstDueDateSelection(n,{flat:!0})+"\n\t\t\t\t\t⎜　passedDoneTest = "+s+"\n\t\t\t\t\t⎜　passedHiddenItemsTest = "+l+"\n\t\t\t\t\t⎣___________________________________________________________________⎦\n\t\t\t\t\t")}else d=t.testAgainstTagSelection(n)&&t.testAgainstDueDateSelection(n)&&s&&l,console.log("\n\t\t\t\t\t⎡⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺ testing ("+n+") tree structure! ⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎺⎤\n\t\t\t\t\t⎜　passedTagTest = "+t.testAgainstTagSelection(n)+"\n\t\t\t\t\t⎜　passedDueDateTest = "+t.testAgainstDueDateSelection(n)+"\n\t\t\t\t\t⎜　passedDoneTest = "+s+"\n\t\t\t\t\t⎜　passedHiddenItemsTest = "+l+"\n\t\t\t\t\t⎣___________________________________________________________________⎦\n\t\t\t\t\t")}return d}}}}},173:function(e,t,n){"use strict";function i(){return{user:null}}var o=n(7),r=n.n(o),a=n(22),d=n.n(a);t.a={namespaced:!0,state:i(),mutations:{resetStateData:function(e){var t=i();e=d()(e,t)},updateState:function(e,t){var n=t.field,i=t.value;n||i||(n=r()(t)[0],i=t[n]),e[n]=i}},actions:{},getters:{loggedIn:function(e){return!!e.user}}}},174:function(e,t,n){"use strict";function i(){return{plannedDurations:[10,15,25,50],language:"en",journalShowParentBodies:!0}}var o=n(7),r=n.n(o),a=n(22),d=n.n(a);t.a={namespaced:!0,state:i(),mutations:{resetStateData:function(e){var t=i();e=d()(e,t)},updateState:function(e,t){var n=t.field,i=t.value;n||i||(n=r()(t)[0],i=t[n]),e[n]=i}},actions:{},getters:{}}},175:function(e,t,n){"use strict";var i=n(7),o=n.n(i),r=n(22),a=n.n(r),d=n(79);t.a={resetStateData:function(e){var t=n.i(d.a)();e=a()(e,t)},updateState:function(e,t){var n=t.field,i=t.value;if(n||i||(n=o()(t).filter(function(e){return"id"!=e})[0],i=t[n]),t.id)return void(e.nodes[t.id][n]=i);e[n]=i},updatePopouts:function(e,t){var n=t.field,i=t.value;n||i||(n=o()(t)[0],i=t[n]),e.popouts[n]=i},updatePopups:function(e,t){var n=t.field,i=t.value;n||i||(n=o()(t)[0],i=t[n]),e.popups[n]=i},removePopout:function(e,t){var n=t.type,i=t.index;e.popouts[n].splice(i,1)},removePopup:function(e,t){var n=t.index;e.popups.splice(n,1)},addPopup:function(e,t){var n=t.popup;e.popups.push(n)},pushFlash:function(e,t){e.flashes.push(t)},resetNewItem:function(e){e.newItem.body="",e.newItem.due_date="0000-00-00 00:00:00",e.newItem.done_date="0000-00-00 00:00:00",e.newItem.done=!1,e.newItem.planned_time="",e.newItem.preparedTags=[]},addNode:function(e,t){var n=t.item;vm.$set(e.nodes,n.id,n)},addChild:function(e,t){var n=t.newParentId,i=t.index,o=t.item;if(e.nodes[n].children||(e.nodes[n].children=[]),e.nodes[n].children_order||(e.nodes[n].children_order=[]),!i)return e.nodes[n].children.push(o),void e.nodes[n].children_order.push(o.id);e.nodes[n].children.splice(i,0,o),e.nodes[n].children_order.splice(i,0,o.id)},addOrDeleteTempTag:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,i=t.tagObject,o=t.requestType,r=void 0===o?"tag":o;console.log(r+"ging items tempor "+n+' with "'+i.tag_name+'"'),"tag"==r&&(console.log(e.nodes[n].tagged),e.nodes[n].tagged.push(i),console.log(e.nodes[n].tagged)),"untag"==r&&(e.nodes[n].tagged=e.nodes[n].tagged.filter(function(e){return e.tag_slug!=i.tag_slug}))},deleteTag:function(e,t){var n=t.id,i=t.tags;if(!e.nodes[n])return void console.log("trying to tag an unexisting item");i.forEach(function(t){return e.nodes[n].tagged=e.nodes[n].tagged.filter(function(e){return e.tag_slug!=t.tag_slug})})},addTagTemporarely:function(e,t){var n=t.id,i=t.tags;if(Array.isArray(i)||(i=[i]),!e.nodes[n])return void console.log("trying to tag an unexisting item");console.log("tagging items tempor "+n+' with... "'+i.map(function(e){return e.tag_name})+'"'),i.forEach(function(t){return e.nodes[n].tagged.push(t)})},deleteTempItem:function(e,t){var n=t.item,i=e.nodes[n.parent_id];e.nodes[n.parent_id].children=i.children.filter(function(e){return!e.temp}),e.nodes[n.parent_id].children_order=i.children_order.filter(function(e){return!e.toString().includes("tempItem")}),o()(e.nodes).forEach(function(t){t.toString().includes("tempItem")&&vm.$delete(e.nodes,t)})},deleteChild:function(e,t){var n=t.index,i=t.id;e.nodes[i].children.splice(n,1),e.nodes[i].children_order.splice(n,1)},closeFlash:function(e,t){var n=t.flash;e.flashes=e.flashes.filter(function(e){return e!=n})}}},363:function(e,t){},364:function(e,t){},365:function(e,t){},373:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},staticRenderFns:[]}},378:function(e,t,n){function i(e){var t=o[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var o={"./Error404.vue":[381,6],"./Hello.vue":[382,5],"./Index.vue":[383,1],"./Listo.vue":[384,0],"./Login.vue":[385,3],"./QuasarSplash.vue":[386,4],"./Register.vue":[387,2]};i.keys=function(){return Object.keys(o)},e.exports=i,i.id=378},45:function(e,t,n){"use strict";function i(e){return e||console.log("item undefffff"),e.depth=Number(e.depth),null==e.show_children&&(e.show_children=1),e.children||(e.children=[]),e.due_date||(e.due_date="0000-00-00 00:00:00"),e.done_date||(e.done_date="0000-00-00 00:00:00"),e.done||(e.done=!1),e.used_time||(e.used_time=0),e.tagged||(e.tagged=[]),e.children_order?"string"==typeof e.children_order&&(e.children_order=e.children_order.split(",").map(Number)):e.children_order=[],e}t.a=i},78:function(e,t,n){"use strict";t.a={en:{global:{sec:"sec",min:"min",hour:"hour",m:"m",h:"h",s:"s",cancel:"Cancel",delete:"Delete",save:"Save",reload:"Reload"},user:{login:"Login",logout:"Logout",register:"Register",email:"Email Address",password:"Password",passwordConfirm:"Please type password again",showpassword:"Show password",name:"Name"},menu:{all:"All",today:"Today",journal:"Journal","?":"?",usedTime:"Used time",timeLeft:"Time left",items:"Items",done:"Done",total:"Total"},card:{duration:"Duration:",addTag:"Add tag:",edit:"Edit",copy:"Copy",setToday:"Do today",addAndContinue:"Add and continue",addAndClose:"Add and close",addNew:"Add new..."},tags:{done:"Done",today:"Today"},popouts:{reset:"Reset",ok:"Ok",reallyDelete:"Really delete",andAllChildren:"And all children",overtime:"overtime",total:"Total"},popups:{journalNotes:"Journal notes",journalNotesPopover:"Edit journal notes",completed:"Completed",completedB:"",usedTime:"Used time",reset:"Reset",setNotDone:"Undo completion"},guide:{action:"Action",key:"Key",keybindings:[{key:"T",note:"Do <u>T</u>oday"},{key:"S",note:"<u>S</u>topwatch / Timer"},{key:"tab",note:"Indent item"},{key:"enter",note:"Add item"},{key:"cmd/ctrl + enter",note:"Edit item"},{key:"shift + T",note:"Edit tags"},{key:"alt + click on tag",note:"Hide tag"},{key:"cmd/ctrl + ↑↓",note:"Move item up/down"},{key:"ctrl + shift + D",note:"Duplicate item"}],hints:{addItemHint:"Add some items!"}},flashes:{moveTopLvlItem:"You cannot move this item when there is a filter.",cannotDoThisInJournal:"You cannot do this in the Journal.",ajaxError:"Error with connection. Reloading in "}},ja:{global:{sec:"秒",min:"分",hour:"時",m:"分",h:"時",s:"秒",cancel:"キャンセル",delete:"削除",save:"保存",reload:"再読込"},user:{login:"ログイン",logout:"ログアウト",register:"登録",email:"メールアドレス",password:"パスワード",passwordConfirm:"パスワードを再度入力",showpassword:"パスワードを表示",name:"名前"},menu:{all:"全て",today:"今日",journal:"日報","?":"？",usedTime:"使用時間",timeLeft:"残時間",items:"アイテム",done:"完了",total:"合計"},card:{duration:"使用時間:",addTag:"タグを追加:",edit:"編集",copy:"コピー",setToday:"今日やる",addAndContinue:"複数追加",addAndClose:"追加して閉じる",addNew:"追加..."},tags:{done:"完了",today:"今日"},popouts:{reset:"リセット",ok:"Ok",reallyDelete:"本当に削除しますか？",andAllChildren:"とその中の全てのアイテム",overtime:"オーバータイム",total:"合計"},popups:{journalNotes:"日報メモ",journalNotesPopover:"日報メモを編集",completed:"",completedB:"を完了致しました",usedTime:"使用時間",reset:"リセット",setNotDone:"完了取り消し"},guide:{action:"アクション",key:"ショートカットキー",keybindings:[{key:"T",note:"今日のタスクとして設定"},{key:"S",note:"ストップウォッチ / タイマー"},{key:"tab",note:"アイテムを右へ"},{key:"enter",note:"アイテムを追加"},{key:"cmd/ctrl + enter",note:"アイテムを編集"},{key:"shift + T",note:"タグを編集"},{key:"alt + click on tag",note:"タグのアイテムを非表示"},{key:"cmd/ctrl + ↑↓",note:"アイテムを上下へ移動"},{key:"ctrl + shift + D",note:"アイテムを複製"}],hints:{addItemHint:"アイテムを追加しよう！"}},flashes:{moveTopLvlItem:"フィルタをかけた際、このアイテムは動かせません。",cannotDoThisInJournal:"日報では機能しません。",ajaxError:"接続エラー。再読込まで "}}}},79:function(e,t,n){"use strict";var i=n(23),o=(n.n(i),n(78)),r=n(169),a=n(45);window.apiBaseURL="http://api.lucaban.com/";var d=n.i(a.a)({id:"z",depth:0,temp:!0,body:"ALL"}),s={};s[d.id]=d;t.a=function(){return{languageContents:o.a,keybindings:r.a,nodes:s,source:d,root:d,apiBaseURL:apiBaseURL,orphans:[],debug:!1,doneData:null,addingNewUnder:null,addingNewAsChild:!1,addingNewAsFirstChild:!1,editingItem:null,editingItemTags:null,editingDoneDateItem:null,loading:!1,patching:!1,popups:[],popouts:{delete:[],timer:[],edit:[],guide:!1},flashes:[],timerItems:[],beforeEditCache_body:null,beforeEditCache_planned_time:null,fetchedDone:!1,blockBlur:!1,manualMobile:!1,newTag:null,setLanguage:null}}}},[165]);